<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>B√†n C·ªù Caro - ƒêang Thi ƒê·∫•u</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body style="background-color: #e3f2fd;"> 
    <div class="game-layout">
        <div class="board-section">
            <div class="board-header">
                <i class="fas fa-hashtag"></i> M√£ Ph√≤ng: <span id="room-id" style="color: red;">ƒêang t·∫£i...</span> 
                <button class="btn" id="btn-copy" style="padding: 2px 10px; font-size: 12px; margin-left: 10px;">üìã Sao ch√©p m√£</button>
            </div>
            
            <div class="caro-grid" id="caro-grid"></div>
        </div>

        <div class="control-section">
            <div class="status-box" style="text-align: center;">
                <p style="margin: 0; font-weight: bold; color: #555;">L∆Ø·ª¢T ƒêI HI·ªÜN T·∫†I</p>
                <div id="current-turn" style="font-size: 40px; font-weight: bold; color: red;">X</div>
            </div>

            <div class="player-card">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: blue; font-weight: bold;">O (B·∫°n)</span>
                    <span style="color: red; font-weight: bold;">X (ƒê·ªëi th·ªß)</span>
                </div>
                <div style="font-size: 14px; color: #333;">
                    T·ªâ s·ªë v√°n: <b style="color: blue;">0</b> - <b style="color: red;">0</b>
                </div>
            </div>

            <div class="chat-area">
                <p style="margin: 0 0 5px 0; font-weight: bold; font-size: 13px;">H·ªòP THO·∫†I CHAT</p>
                <div class="chat-logs" id="chat-logs">
                    <div style="color: green; font-style: italic;">[H·ªá th·ªëng]: Ch√†o m·ª´ng b·∫°n ƒë√£ v√†o ph√≤ng!</div>
                </div>
                <div style="display: flex; gap: 2px;">
                    <input type="text" placeholder="Nh·∫≠p tin nh·∫Øn..." id="chat-input">
                    <button class="btn" style="padding: 0 10px;" id="btn-send"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn" style="background: #ef4444; color: white; border: none;"><i class="fas fa-flag"></i> ƒê·∫ßu h√†ng</button>
                <button class="btn" style="background: #f59e0b; color: white; border: none;"><i class="fas fa-handshake"></i> Xin h√≤a</button>
                <button class="btn" style="background: #64748b; color: white; border: none;"><i class="fas fa-rotate-right"></i> Ch∆°i l·∫°i</button>
            </div>

            <button class="btn" style="margin-top: auto; color: darkblue;" onclick="window.location.href='index.html'">
                <i class="fas fa-sign-out-alt"></i> R·ªùi kh·ªèi ph√≤ng
            </button>
        </div>
    </div>

    <script>
        // T·ª∞ ƒê·ªòNG KH·ªöP M√É PH√íNG KHI T·∫¢I TRANG
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const roomId = urlParams.get('id'); // L·∫•y m√£ sau d·∫•u ?id=
            if (roomId) {
                document.getElementById('room-id').innerText = roomId;
            } else {
                document.getElementById('room-id').innerText = "Ph√≤ng t·ª± do";
            }
        });

        // Ch·ª©c nƒÉng sao ch√©p m√£ ph√≤ng ƒë·ªÉ g·ª≠i cho b·∫°n b√®
        document.getElementById('btn-copy').onclick = function() {
            const roomId = document.getElementById('room-id').innerText;
            navigator.clipboard.writeText(roomId);
            alert("ƒê√£ sao ch√©p m√£ ph√≤ng: " + roomId);
        };

        // KH·ªûI T·∫†O B√ÄN C·ªú 15x15 (225 √¥)
        const grid = document.getElementById('caro-grid');
        let currentSymbol = 'X';

        for (let i = 0; i < 225; i++) {
            const cell = document.createElement('div');
            cell.className = 'caro-cell';
            cell.dataset.index = i;
            cell.onclick = function() {
                if (!this.innerText) {
                    this.innerText = currentSymbol;
                    this.style.color = (currentSymbol === 'X') ? 'red' : 'blue';
                    
                    // ƒê·ªïi l∆∞·ª£t ƒë√°nh
                    currentSymbol = (currentSymbol === 'X') ? 'O' : 'X';
                    const turnDisplay = document.getElementById('current-turn');
                    turnDisplay.innerText = currentSymbol;
                    turnDisplay.style.color = (currentSymbol === 'X') ? 'red' : 'blue';
                }
            };
            grid.appendChild(cell);
        }

        // X·ª≠ l√Ω g·ª≠i tin nh·∫Øn Chat
        document.getElementById('chat-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter' && this.value.trim() !== "") {
                const logs = document.getElementById('chat-logs');
                const msg = document.createElement('div');
                msg.innerHTML = `<b>B·∫°n:</b> ${this.value}`;
                logs.appendChild(msg);
                logs.scrollTop = logs.scrollHeight; // Cu·ªôn xu·ªëng tin nh·∫Øn m·ªõi nh·∫•t
                this.value = "";
            }
        });
    </script>
</body>
</html>
