<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>B√†n C·ªù Caro - ƒêang Thi ƒê·∫•u</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* CSS n·ªôi b·ªô ƒë·ªÉ kh·ªõp ch√≠nh x√°c v·ªõi ·∫£nh ch·ª•p m√†n h√¨nh */
        body {
            background-color: #e3f2fd;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .game-layout {
            display: flex;
            gap: 20px;
            padding: 20px;
            background: white;
            border: 8px solid #5fb391; /* Vi·ªÅn xanh ƒë·∫∑c tr∆∞ng trong ·∫£nh */
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .board-header {
            background: #f5f5f5;
            padding: 10px;
            font-weight: bold;
            border: 1px solid #ccc;
            margin-bottom: 10px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .caro-grid {
            display: grid;
            grid-template-columns: repeat(15, 30px);
            grid-template-rows: repeat(15, 30px);
            gap: 1px;
            background-color: #999;
            border: 2px solid #999;
        }

        .caro-cell {
            width: 30px;
            height: 30px;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }

        .control-section {
            width: 280px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .status-box, .player-card, .chat-area {
            border: 1px solid #7a7a7a;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 4px;
        }

        .chat-logs {
            height: 150px;
            background: white;
            border: 1px solid #ccc;
            overflow-y: auto;
            padding: 8px;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .action-buttons button {
            padding: 8px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            border-radius: 4px;
            color: white;
        }

        .btn-copy {
            background: #f5f5f5;
            border: 1px solid #ccc;
            padding: 2px 8px;
            cursor: pointer;
            font-size: 11px;
        }
    </style>
</head>
<body> 
    <div class="game-layout">
        <div class="board-section">
            <div class="board-header">
                <div># M√£ Ph√≤ng: <span id="room-id" style="color: red;">Ph√≤ng t·ª± do</span></div>
                <button class="btn-copy" onclick="copyRoomId()">üìã Sao ch√©p m√£</button>
            </div>
            
            <div class="caro-grid" id="caro-grid"></div>
        </div>

        <div class="control-section">
            <div class="status-box" style="text-align: center;">
                <p style="margin: 0; font-weight: bold; color: #555;">L∆Ø·ª¢T ƒêI HI·ªÜN T·∫†I</p>
                <div id="current-turn" style="font-size: 40px; font-weight: bold; color: red;">X</div>
            </div>

            <div class="player-card">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: blue; font-weight: bold;">O (B·∫°n)</span>
                    <span style="color: red; font-weight: bold;" id="opp-name">X (ƒê·ªëi th·ªß)</span>
                </div>
                <div style="font-size: 14px; color: #333;">
                    T·ªâ s·ªë v√°n: <b style="color: blue;">0</b> - <b style="color: red;">0</b>
                </div>
            </div>

            <div class="chat-area">
                <p style="margin: 0 0 5px 0; font-weight: bold; font-size: 12px; color: #333;">H·ªòP THO·∫†I CHAT</p>
                <div class="chat-logs" id="chat-logs">
                    <div style="color: green; font-style: italic;">[H·ªá th·ªëng]: Ch√†o m·ª´ng b·∫°n ƒë√£ v√†o ph√≤ng!</div>
                </div>
                <div style="display: flex; gap: 2px;">
                    <input type="text" placeholder="Nh·∫≠p tin nh·∫Øn..." id="chat-input" style="flex: 1; padding: 5px; border: 1px solid #ccc;">
                    <button style="background: none; border: none; cursor: pointer; color: red;" id="btn-send">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <div class="action-buttons" style="display: flex; flex-direction: column; gap: 5px;">
                <div style="display: flex; gap: 5px;">
                    <button style="background: #ef4444; flex: 1;"><i class="fas fa-flag"></i> ƒê·∫ßu h√†ng</button>
                    <button style="background: #f59e0b; flex: 1;"><i class="fas fa-handshake"></i> Xin h√≤a</button>
                </div>
                <button style="background: #64748b;"><i class="fas fa-rotate-right"></i> Ch∆°i l·∫°i</button>
            </div>

            <button style="margin-top: auto; padding: 10px; font-weight: bold; background: #e0e7ff; border: 1px solid #312e81; color: #312e81; cursor: pointer; border-radius: 4px;" onclick="window.location.href='index.html'">
                <i class="fas fa-sign-out-alt"></i> R·ªùi kh·ªèi ph√≤ng
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const roomId = params.get('id');
            const opponent = params.get('opponent');
            if(roomId) document.getElementById('room-id').innerText = roomId;
            if(opponent) document.getElementById('opp-name').innerText = opponent + " (X)";
        });

        function copyRoomId() {
            navigator.clipboard.writeText(document.getElementById('room-id').innerText);
            alert("ƒê√£ sao ch√©p m√£ ph√≤ng!");
        }

        const grid = document.getElementById('caro-grid');
        let currentSymbol = 'X';
        for (let i = 0; i < 225; i++) {
            const cell = document.createElement('div');
            cell.className = 'caro-cell';
            cell.onclick = function() {
                if (!this.innerText) {
                    this.innerText = currentSymbol;
                    this.style.color = (currentSymbol === 'X') ? 'red' : 'blue';
                    currentSymbol = (currentSymbol === 'X') ? 'O' : 'X';
                    const turnDisplay = document.getElementById('current-turn');
                    turnDisplay.innerText = currentSymbol;
                    turnDisplay.style.color = (currentSymbol === 'X') ? 'red' : 'blue';
                }
            };
            grid.appendChild(cell);
        }

        document.getElementById('chat-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter' && this.value.trim() !== "") {
                const logs = document.getElementById('chat-logs');
                const msg = document.createElement('div');
                msg.innerHTML = `<b>B·∫°n:</b> ${this.value}`;
                logs.appendChild(msg);
                logs.scrollTop = logs.scrollHeight;
                this.value = "";
            }
        });
    </script>
</body>
</html>
